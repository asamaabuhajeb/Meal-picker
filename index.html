<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Meal Picker ‚Äî NEO</title>
  <meta name="color-scheme" content="dark">
  <meta name="description" content="Ultra-fast, single-file meal picker that generates Breakfast/Lunch/Dinner/Snack with images, steps, and copy/share tools.">
  <style>
    :root{
      --bg:#0a0f1a;
      --panel:#0f1524cc;
      --panel-solid:#0f1524;
      --text:#e9f0ff;
      --sub:#a7b3d8;
      --primary:#39ff14;
      --primary-glow: 0 0 24px #39ff1480, 0 0 48px #39ff1426;
      --stroke:#1e2a44;
      --radius:16px;
      --shadow: 0 8px 32px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 10% -10%, #12203b 0%, transparent 60%),
                  radial-gradient(1000px 800px at 110% 20%, #06112a 0%, transparent 60%),
                  var(--bg);
      color:var(--text);
    }
    .topbar{
      position:sticky; top:0; z-index:50;
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 20px; background:linear-gradient(180deg, #0a0f1acc 60%, transparent);
      backdrop-filter: blur(10px);
      border-bottom:1px solid #0c1428;
    }
    .brand{display:flex; align-items:center; gap:10px;}
    .brand h1{font-size:clamp(18px,2.2vw,24px); margin:0; font-weight:700; letter-spacing:.3px}
    .brand em{font-style:normal; color:var(--primary)}
    .brand .dot{
      width:10px; height:10px; border-radius:50%;
      background:var(--primary); box-shadow: var(--primary-glow);
    }
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .container{
      width:min(1200px, 92vw);
      margin:28px auto 40px auto;
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
    }
    @media (min-width:700px){ .container{ grid-template-columns: 1fr 1fr; } }
    @media (min-width:1040px){ .container{ grid-template-columns: 1fr 1fr 1fr; } }
    .card{
      background: linear-gradient(180deg, #0c1428aa, #0b1222aa);
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
    }
    .card::after{
      content:""; position:absolute; inset:auto -40% 0 -40%; height:1px;
      background: linear-gradient(90deg, transparent, #39ff1499, transparent);
      filter: blur(0.6px); opacity:.4;
    }
    .card:hover{ transform: translateY(-2px); border-color:#2a3d6b; }
    .card__head{ padding:18px 18px 8px 18px; }
    .title{ margin:8px 0 8px 0; font-size:clamp(18px,2vw,22px); }
    .meta{ display:flex; gap:10px; flex-wrap:wrap; color:var(--sub); font-size:13px; }
    .badge{
      display:inline-block; padding:6px 10px; border-radius:999px;
      background: #071121; border:1px solid #142040; color:#9ec2ff; font-size:12px;
      letter-spacing:.3px;
    }
    .ingredients, .steps{ padding:6px 18px 14px 18px; }
    .ingredients h3, .steps h3{ margin:10px 0 10px; font-size:14px; color:#cfe1ff; letter-spacing:.3px; }
    .ingList{ display:grid; grid-template-columns: 1fr; gap:10px; list-style:none; padding:0; margin:0; }
    @media (min-width:540px){ .ingList{ grid-template-columns: 1fr 1fr; } }
    .ingItem{
      display:flex; gap:10px; align-items:center; background:#0a1327; border:1px solid #142040; border-radius:12px; padding:8px;
    }
    .ingItem img{
      width:48px; height:48px; border-radius:10px; object-fit:cover; border:1px solid #213462;
    }
    .ingItem span{ font-size:14px }
    .stepList{ margin:0; padding-left:20px; color:#dbe6ff; }
    .stepList li{ margin-bottom:8px; line-height:1.4; }
    .card__actions{
      display:flex; gap:10px; padding:14px 18px 18px 18px; flex-wrap:wrap;
    }
    .btn{
      --_bg:#0f1c34; --_fg:#cfe1ff; --_bd:#22345f;
      background:var(--_bg); color:var(--_fg); border:1px solid var(--_bd);
      border-radius:10px; padding:10px 14px; font-weight:600; letter-spacing:.2px; cursor:pointer;
      transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color:#2a4580; }
    .btn:active{ transform: translateY(0); }
    .btn.primary{ --_bg: linear-gradient(180deg, #0b2a18, #081f12); --_bd:#255c3d; color:#d6ffe6; box-shadow: var(--primary-glow); }
    .btn.ghost{ background:transparent; }
    .btn.tiny{ padding:8px 10px; font-size:12px; }
    .foot{
      width:min(1200px, 92vw); margin:20px auto 60px; color:var(--sub);
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    .toggle{ display:flex; align-items:center; gap:8px; font-size:14px; }
    @media (prefers-reduced-motion: reduce){
      *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="dot"></span>
      <h1>Meal Picker <em>NEO</em></h1>
    </div>
    <nav class="actions">
      <button id="generateAll" class="btn primary">Generate Day</button>
      <button id="shuffleAll" class="btn ghost">Shuffle</button>
      <button id="copyAll" class="btn ghost">Copy</button>
    </nav>
  </header>

  <main class="container" id="app" tabindex="-1"></main>

  <footer class="foot">
    <div>Single-file ‚Ä¢ Images auto-sourced ‚Ä¢ Zero dependencies</div>
    <label class="toggle">
      <input type="checkbox" id="reduceMotion">
      <span>Reduce motion</span>
    </label>
  </footer>

  <template id="mealCardTpl">
    <section class="card">
      <div class="card__head">
        <div class="badge" data-type="">Meal</div>
        <h2 class="title"></h2>
        <div class="meta">
          <span class="calories"></span>
          <span class="time"></span>
          <span class="tags"></span>
        </div>
      </div>
      <div class="ingredients">
        <h3>Ingredients</h3>
        <ul class="ingList"></ul>
      </div>
      <div class="steps">
        <h3>Steps</h3>
        <ol class="stepList"></ol>
      </div>
      <div class="card__actions">
        <button class="btn tiny" data-action="regenerate">Regenerate</button>
        <button class="btn tiny" data-action="swap">Swap</button>
        <button class="btn tiny" data-action="copy">Copy</button>
      </div>
    </section>
  </template>

  <script>
    const USE_EMOJI_IMAGES = false;

    const MEAL_DATA = {
      breakfast: [
        {name:"Zaatar & Labneh Wrap",calories:420,time:"10 min",tags:["Vegetarian","Quick"],
         ingredients:["flatbread","labneh","zaatar","olive oil","cucumber","tomato","mint"],
         steps:["Spread labneh on warm flatbread.","Sprinkle zaatar and drizzle olive oil.","Add sliced cucumber, tomato, and mint; roll tightly."]},
        {name:"Egg & Halloumi Plate",calories:480,time:"12 min",tags:["High-Protein"],
         ingredients:["eggs","halloumi","olives","cherry tomatoes","olive oil"],
         steps:["Pan-sear halloumi until golden.","Fry or scramble eggs.","Plate with olives and tomatoes, drizzle olive oil."]}
      ],
      lunch: [
        {name:"Chicken Shawarma Bowl",calories:650,time:"25 min",tags:["Protein","Meal-prep"],
         ingredients:["chicken breast","shawarma spice","rice","cabbage","garlic sauce","pickles"],
         steps:["Season chicken with shawarma spice and pan-sear.","Serve over rice with shredded cabbage and pickles.","Drizzle with garlic sauce."]},
        {name:"Tuna Pasta Salad",calories:560,time:"20 min",tags:["Cold","Quick"],
         ingredients:["pasta","tuna","sweet corn","olive oil","lemon","parsley"],
         steps:["Boil pasta; drain and cool.","Mix with tuna, corn, chopped parsley.","Dress with olive oil and lemon."]}
      ],
      dinner: [
        {name:"Grilled Kofta with Bulgur",calories:700,time:"30 min",tags:["Balanced"],
         ingredients:["kofta","bulgur","onion","tomato","yogurt","parsley"],
         steps:["Grill kofta until cooked through.","Simmer bulgur with salt until fluffy.","Serve with chopped tomato, onion, parsley, and yogurt."]},
        {name:"Salmon & Veg Traybake",calories:590,time:"25 min",tags:["Omega-3","One-pan"],
         ingredients:["salmon","potatoes","broccoli","olive oil","lemon","garlic"],
         steps:["Roast potato cubes 10 min.","Add salmon and broccoli; drizzle oil, lemon, garlic; roast 12-15 min."]}
      ],
      snack: [
        {name:"Dates & Peanut Butter",calories:260,time:"2 min",tags:["Quick","Sweet"],
         ingredients:["medjool dates","peanut butter","walnuts"],
         steps:["Pit dates, fill with peanut butter, top with walnut pieces."]},
        {name:"Greek Yogurt Cup",calories:280,time:"3 min",tags:["Protein"],
         ingredients:["greek yogurt","honey","banana","oats"],
         steps:["Layer yogurt with sliced banana, drizzle honey, sprinkle oats."]}
      ]
    };

    const TYPES = ["breakfast","lunch","dinner","snack"];
    const STATE = { meals:{} };
    const imgCache = new Map();
    function imgFor(ingredient){
      const key = ingredient.toLowerCase().replace(/\s+/g,'-');
      if(imgCache.has(key)) return imgCache.get(key);
      let src;
      if(USE_EMOJI_IMAGES){
        src="data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='96' height='96'><rect width='100%' height='100%' fill='%230a1327'/><text x='50%' y='60%' text-anchor='middle' font-size='64'>üçΩÔ∏è</text></svg>`);
      }else{
        src=`https://source.unsplash.com/featured/?${encodeURIComponent(ingredient)},food`;
      }
      imgCache.set(key,src);
      return src;
    }

    const qs=(s,e=document)=>e.querySelector(s);
    function pickRandom(arr){return arr[Math.floor(Math.random()*arr.length)];}
    function makeMeal(type){const v=pickRandom(MEAL_DATA[type]);return {...v,type};}
    function renderAll(){
      const app=qs('#app');app.innerHTML="";
      TYPES.forEach(t=>{STATE.meals[t]=STATE.meals[t]||makeMeal(t);app.appendChild(renderCard(STATE.meals[t]));});
    }
    function renderCard(meal){
      const tpl=qs('#mealCardTpl').content.cloneNode(true);
      const card=tpl.querySelector('.card');
      tpl.querySelector('.badge').textContent=meal.type.toUpperCase();
      tpl.querySelector('.title').textContent=meal.name;
      tpl.querySelector('.calories').textContent=`${meal.calories} kcal`;
      tpl.querySelector('.time').textContent=`‚è± ${meal.time}`;
      tpl.querySelector('.tags').textContent=meal.tags.join(" ‚Ä¢ ");
      const ingList=tpl.querySelector('.ingList');
      meal.ingredients.forEach(ing=>{
        const li=document.createElement('li');li.className='ingItem';
        const img=document.createElement('img');img.alt=ing;img.loading='lazy';img.src=imgFor(ing);
        img.onerror=()=>{img.src="data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='96' height='96'><rect width='100%' height='100%' fill='%230a1327'/><text x='50%' y='60%' text-anchor='middle' font-size='64'>üçΩÔ∏è</text></svg>`);};
        const span=document.createElement('span');span.textContent=ing;
        li.append(img,span);ingList.appendChild(li);
      });
      const stepList=tpl.querySelector('.stepList');
      meal.steps.forEach(s=>{const li=document.createElement('li');li.textContent=s;stepList.appendChild(li);});
      tpl.querySelector('[data-action="regenerate"]').onclick=()=>{STATE.meals[meal.type]=makeMeal(meal.type);replaceCard(card,STATE.meals[meal.type]);};
      tpl.querySelector('[data-action="swap"]').onclick=()=>{const o=TYPES.filter(t=>t!==meal.type);const n=makeMeal(pickRandom(o));STATE.meals[n.type]=n;replaceCard(card,n);};
      tpl.querySelector('[data-action="copy"]').onclick=()=>{navigator.clipboard.writeText(stringifyMeal(meal)).then(()=>toast("Copied!"));};
      return tpl;
    }
    function replaceCard(oldCard,newMeal){oldCard.parentElement.replaceChild(renderCard(newMeal),oldCard);}
    function stringifyMeal(m){return `${m.type.toUpperCase()}: ${m.name}\nCalories: ${m.calories} ‚Ä¢ Time: ${m.time} ‚Ä¢ ${m.tags.join(", ")}\n\nIngredients:\n- ${m.ingredients.join("\n- ")}\n\nSteps:\n${m.steps.map((s,i)=>`${i+1}. ${s}`).join("\n")}`;}
    let toastEl;function toast(msg){if(!toastEl){toastEl=document.createElement('div');Object.assign(toastEl.style,{position:'fixed',bottom:'22px',left:'50%',transform:'translateX(-50%)',background:'#0b1325',color:'#dff6ff',border:'1px solid #25527a',padding:'10px 14px',borderRadius:'10px',boxShadow:'0 8px 30px rgba(0,0,0,.35)',zIndex:'9999'});document.body.appendChild(toastEl);}toastEl.textContent=msg;toastEl.style.opacity='1';setTimeout(()=>toastEl.style.opacity='0',1200);}
    qs('#generateAll').onclick=()=>{TYPES.forEach(t=>STATE.meals[t]=makeMeal(t));renderAll();};
    qs('#shuffleAll').onclick=()=>{TYPES.forEach(t=>STATE.meals[t]=makeMeal(t));renderAll();};
    qs('#copyAll').onclick=()=>{navigator.clipboard.writeText(TYPES.map(t=>stringifyMeal(STATE.meals[t])).join("\n\n---\n\n")).then(()=>toast("All meals copied!"));};
    window.addEventListener('DOMContentLoaded',()=>{TYPES.forEach(t=>STATE.meals[t]=makeMeal(t));renderAll();});
  </script>
</body>
</html>